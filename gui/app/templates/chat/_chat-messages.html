<div class="chat-tab-content">
  <!-- <div class="quick-actions-column">
    <button
      class="quick-action-btn"
      ng-click="showEditStreamInfoModal()"
      uib-tooltip="Edit Stream Info"
      append-tooltip-to-body="true"
      tooltip-placement="right"
      aria-label="Edit Stream Info"
    >
      <i class="far fa-pencil"></i>
    </button>

    <button
      style="margin-top: 10px"
      class="quick-action-btn"
      uib-tooltip="Give Currency"
      append-tooltip-to-body="true"
      tooltip-placement="right"
      ng-click="showGiveCurrencyModal();"
      aria-label="Give Currency"
    >
      <i class="far fa-coins"></i>
    </button>

    <button
      style="margin-top: 10px"
      class="quick-action-btn"
      uib-tooltip="Open Stream Preview"
      append-tooltip-to-body="true"
      tooltip-placement="right"
      ng-click="popoutStreamPreview()"
      aria-label="Open Stream Preview"
    >
      <i class="far fa-tv-alt"></i>
    </button>
  </div> -->


  <div class="chat-window-column" style="margin:10px 10px 10px 10px;height:98%;">
    <div class="chat-window-wrapper" style="background: #24262A;">
      <i uib-tooltip="Popout" tooltip-append-to-body="true" ng-hide="!chatFeedIsEnabled()" class="fas fa-external-link-alt" ng-hide="chatBoxIsPopped" ng-click="popChatBox()" aria-hidden="true" style="/* text-align: right; */display: flex;position: absolute;right: 10px;top: 10px;cursor: pointer;z-index: 1050;"></i>
      <div ng-hide="chatFeedIsEnabled()" class="chatfeed-disabled-overlay" style="background: #24262A;">
        <span style="color: white; font-size: 1.2em; text-align: center">{{disabledMessage}}</span>
      </div>
      <button ng-hide="scrollGlued" ng-click="scrollGlued = true" class="btn-sm clickable" style="
          position: absolute;
          bottom: 0px;
          left: 50%;
          transform: translateX(-50%);
          margin-bottom: 10px;
          background: rgba(104, 105, 108, 0.6);
          border: none;
          color: white;
          z-index: 100;
        ">
        Chat Paused Due to Scroll
      </button>
      <div class="chat-window" ng-init="scrollGlued = true" scroll-glue="scrollGlued" style="{{customFontSizeStyle}}">
        <div ng-repeat="chatItem in cms.chatQueue | limitTo:messageDisplayLimit track by chatItem.id" class="chat-item"
          ng-class="{ alternate: alternateBackgrounds}" scroll-glue-anchor>
          <chat-message ng-if="chatItem.type === 'message'" message="chatItem.data" compact-display="compactDisplay"
            alternate-backgrounds="alternateBackgrounds" hide-deleted-messages="hideDeletedMessages"
            show-avatar="showAvatars" show-timestamp="showTimestamps" show-third-party-emotes="showThirdPartyEmotes"
            show-pronoun="showPronouns" update-chat-input="updateChatInput(text)"
            chat-size-style="{{customFontSizeStyle}}" />
          <reward-redemption ng-if="chatItem.type === 'redemption'" redemption="chatItem.data" />
          <chat-alert ng-if="chatItem.type === 'alert'" message="chatItem.data" />
        </div>
      </div>
    </div>
    <div class="text-input-wrapper">
      <div class="text-input" chat-auto-complete-menu ng-model="chatMessage" input-id="chatMessageInput">
        <div class="dropup">
          <!-- <span class="dropdown-toggle chatter-dropdown" data-toggle="dropdown" uib-tooltip="Chat as"
            tooltip-placement="left" tooltip-append-to-body="true"> -->
          <span class="dropdown-toggle chatter-dropdown" 
            tooltip-placement="left" tooltip-append-to-body="true">
            <span style="width: 100%; text-align: center">{{chatSender}}</span>
            <!-- <span style="margin-left: 10px; width: 100%; text-align: center">{{chatSender}}</span> -->
            <!-- <div class="fb-arrow down" style="margin-left: 10px; margin-right: 10px; margin-bottom: 3px"></div> -->
          </span>
          <ul class="dropdown-menu">
            <li ng-click="chatSender = 'Streamer'"><a href>Streamer</a></li>
            <li ng-click="chatSender = 'Bot'" ng-show="botLoggedIn">
              <a href>Bot</a>
            </li>
          </ul>
        </div>

        <input id="chatMessageInput" type="text" placeholder="Message the stream" class="text-input-field"
          style="height: 100%;padding-right: 55px;" ng-maxlength="360" ng-model="chatMessage" ng-change="onMessageFieldUpdate()"
          ng-keydown="onMessageFieldKeypress($event)" ng-trim="false" ng-disabled="!chatFeedIsEnabled()" />
      </div>
      <div class="settings-btn-wrapper" style="right:35px;">
        <button class="settings-btn" ng-click="showKolChatEmotesModal()" aria-label="Chat Settings" >
          <i class="fal fa-smile"></i>
        </button>
      </div>
      <div class="settings-btn-wrapper">
        <button class="settings-btn" ng-click="showChatSettingsModal()" aria-label="Chat Settings">
          <i class="fal fa-cog"></i>
        </button>
      </div>
    </div>
  </div>
  <div class="viewer-list-column" ng-show="getChatViewerListSetting()" style="margin:10px 10px 10px 10px;height:98%;background:#24262A;border: 0;">
    <div class="viewer-list-header" style="background: #24262A;">
      <span> CHAT USERS </span>
    </div>
    <div class="chat-users" style="margin-top: 5px">
      <chat-user-category category="Moderators" role-key="mod" />
      <chat-user-category category="VIPs" role-key="vip" />
      <chat-user-category category="Viewers" role-key="viewer" />
      <chat-user-category category="Broadcaster" role-key="broadcaster" />
    </div>
  </div>
  <div ng-show="getStreamInfoSetting() || getHistorySetting() || getActivityFeedSetting()" class="view-content" style="margin:10px 10px 10px 10px;height:98%;background:#101111;">
    <div ng-show="getStreamInfoSetting()" class="activity-feed-column" style="background: #24262A; height:33.3%;display: flex;flex-direction: column;border-radius: 10px;">
      <div class="activity-feed-header" style=" padding: 5px;background: #24262A;">
        <div style="display: flex; align-items: center">
            <span style="padding-left: 7px;padding-top:2px;">STREAM INFO</span>
        </div>
        <div uib-dropdown>
            <a href uib-dropdown-toggle class="clickable" style="color: white; font-size: 20px; line-height: 1"
              aria-label="Activity feed options">
              <i class="far fa-ellipsis-v"></i>
            </a>
            <ul class="dropdown-menu right-justified-dropdown" uib-dropdown-menu>
              <li>
                <a href ng-click="refreshStreamInfo()"><i class="fas fa-redo" style="margin-right: 10px;"></i>
                  refresh stream info</a>
              </li>
            </ul>
          </div>
      </div>
      <div class="stream-info-setting">
        <kol-edit-stream-info-modal class="stream-info-setting" style="border-radius: 30%;"></kol-edit-stream-info-modal>
      </div>
    </div>
    <div ng-show="getHistorySetting()" style="background: #101111;height: 33.3%;display: flex;flex-direction: column-reverse;">
      <div class="activity-feed-column" style="background: #24262A;border-radius: 10px;height:90%">
        <div class="activity-feed-header" style=" padding: 5px;background: #24262A;">
          <div style="display: flex; align-items: center">
            <span style="padding-left: 7px;padding-top:2px;">HISTORY</span>
            <span ng-show="khs.historyQueue.length > 0" uib-tooltip=""
              tooltip-append-to-body="true" style="
                background: rgb(119, 121, 121);
                border-radius: 30%;
                padding: 1px 5px;
                color: white;
                font-size: 12px;
                margin-left: 5px;
                display: inline;
                height: max-content;
                flex-grow: 0;
                flex-shrink: 0;
              ">{{ khs.historyQueue.length }}</span>
          </div>
        </div>
        <div class="activity-list">
          <div style="background: #101111;" class="activity alternate-bg" ng-class="activity.acknowledged"
          ng-repeat="activity in khs.historyQueue">
            <div style="
                display: flex;
                flex-direction: column;
                height: 100%;
                align-items: center;
                margin-right: 10px;
                ">
                <span style="font-size: 10px" class="muted" uib-tooltip="{{activity.date}}">{{activity.timestamp}}</span>
            </div>
            <div style="width: 100%" class="activity-message" ng-bind-html="activity.message"></div>
          </div>
        </div>
        <div ng-if="khs.historyQueue.length === 0" class="kol-none-box" style="height: 180px;background: #24262A;margin-left:8px;">
          <p style="font-size: 20px;">NONE</p>
        </div>
      </div>
    </div>
    <div ng-show="getActivityFeedSetting()" style="background: #101111;height:33.3%;display: flex;flex-direction: column-reverse;">
      <div class="activity-feed-column" style="background: #24262A; border-radius: 10px;height: 90%;">
        <div class="activity-feed-header" style=" padding: 5px;background: #24262A;">
          <div style="display: flex; align-items: center">
            <span style="padding-left: 7px;padding-top:2px;">ACTIVITY FEED</span>
            <span ng-show="afs.unacknowledgedCount() > 0" uib-tooltip="Unacknowledged events"
              tooltip-append-to-body="true" style="
                background: #101111;
                border-radius: 30%;
                padding: 1px 5px;
                color: white;
                font-size: 12px;
                margin-left: 5px;
                display: inline;
                height: max-content;
                flex-grow: 0;
                flex-shrink: 0;
              ">{{afs.unacknowledgedCount()}}</span>
          </div>
          <div uib-dropdown>
            <a href uib-dropdown-toggle class="clickable" style="color: white; font-size: 20px; line-height: 1"
              aria-label="Activity feed options">
              <i class="far fa-ellipsis-v"></i>
            </a>
            <ul class="dropdown-menu right-justified-dropdown" uib-dropdown-menu>
              <li ng-class="{'disabled': afs.activities.length < 1}">
                <a href ng-click="afs.toggleMarkAllAcknowledged()"><i class="far fa-check-square"
                    style="margin-right: 10px" aria-label="Mark all events as acknowledged"></i>
                  Mark all as {{afs.allAcknowledged() ? 'Unacknowledged' :
                  'Acknowledged'}}</a>
              </li>
              <li>
                <a href ng-click="afs.showEditActivityFeedEventsModal()"><i class="fas fa-sliders-h"
                    style="margin-right: 10px" aria-label="Edit events"></i>
                  Filters</a>
              </li>
              <!-- <li class="divider"></li> -->
            </ul>
          </div>
        </div>
        <div class="activity-list">
          <div style="background: #101111;" class="activity alternate-bg" ng-class="activity.acknowledged ? 'muted' : ''"
            ng-repeat="activity in afs.activities track by activity.id">
            <div style="
                display: flex;
                flex-direction: column;
                height: 100%;
                align-items: center;
                margin-right: 10px;
              ">
              <i class="{{activity.icon}}" uib-tooltip="{{activity.source.name}}: {{activity.event.name}}"
                style="font-size: 15px"></i>
              <span style="font-size: 10px" class="muted">{{activity.timestamp}}</span>
            </div>
            <div style="width: 100%" class="activity-message" ng-bind-html="activity.message"></div>
            <div style="
                margin-left: 10px;
                font-size: 15px;
                display: flex;
                align-items: center;
              ">
              <i class="clickable far fa-redo" style="margin-right: 10px" ng-click="afs.retriggerEvent(activity.id)"
                uib-tooltip="Retrigger event" tooltip-placement="top-right" tooltip-append-to-body="true"
                aria-label="Retrigger {{activity.event.name}}"></i>

              <i class="clickable far" ng-class="activity.acknowledged ? 'fa-check-square' : 'fa-square'"
                ng-click="activity.acknowledged = !activity.acknowledged"
                uib-tooltip="{{activity.acknowledged ? 'Acknowledged' : 'Acknowledge'}}" tooltip-placement="top-right"
                tooltip-append-to-body="true" aria-label="Acknowledge {{activity.event.name}}"></i>
            </div>
          </div>
        </div>
        <div ng-if="afs.activities.length === 0" class="kol-none-box" style="height: 180px;background: #24262A;margin-left:8px;">
          <p style="font-size: 20px;">NONE</p>
        </div>
      </div>
    </div>
  </div>
</div>